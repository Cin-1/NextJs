(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Bl1U:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("qKvR");o.a.createElement;var c={name:"u2wvoe",styles:"margin-top:5rem;text-align:center;"};t.a=function(){return Object(a.c)("h1",{css:c},"No se puede mostrar")}},Cg2A:function(e,t,n){e.exports=n("guND")},KQpA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("q1tI"),c=l(a),i=l(n("zpNE")),u=l(n("hu/m"));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e){var t=/(?:\.([^.]+))?$/.exec(e);return null!=t&&null!=t[0]?t[0]:""}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.uploadTasks=[],r.handleFileSelection=function(e){for(var t=e.target.files,n=0;n<t.length;n++)r.startUpload(t[n])},s(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.cancelRunningUploads()}},{key:"cancelRunningUploads",value:function(){for(;this.uploadTasks.length>0;){var e=this.uploadTasks.pop();"running"===e.snapshot.state&&e.cancel()}}},{key:"removeTask",value:function(e){for(var t=0;t<this.uploadTasks.length;t++)if(this.uploadTasks[t]===e)return void this.uploadTasks.splice(t,1)}},{key:"startUpload",value:function(e){var t=this,n=this.props,r=n.onUploadStart,o=n.onProgress,a=n.onUploadError,c=n.onUploadSuccess,l=n.storageRef,s=n.metadata,d=n.randomizeFilename,f=n.filename,m=void 0;p(m=f?"function"===typeof f?f(e):f:d?(0,i.default)():e.name)||(m+=p(e.name)),Promise.resolve().then((function(){return e.type.match(/image.*/)&&(t.props.maxWidth||t.props.maxHeight)?(0,u.default)(e,t.props.maxWidth,t.props.maxHeight):e})).then((function(e){var n=l.child(m).put(e,s);r&&r(e,n),n.on("state_changed",(function(e){return o&&o(Math.round(100*e.bytesTransferred/e.totalBytes),n)}),(function(e){return a&&a(e,n)}),(function(){return t.removeTask(n),c&&c(n.snapshot.metadata.name,n)})),t.uploadTasks.push(n)}))}},{key:"render",value:function(){var e=this.props,t=(e.storageRef,e.onUploadStart,e.onProgress,e.onUploadSuccess,e.onUploadError,e.randomizeFilename,e.metadata,e.filename,e.maxWidth,e.maxHeight,e.hidden),n=e.as,o=void 0===n?"input":n,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["storageRef","onUploadStart","onProgress","onUploadSuccess","onUploadError","randomizeFilename","metadata","filename","maxWidth","maxHeight","hidden","as"]),i=t?Object.assign({},a.style,{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}):a.style;return c.default.createElement(o,r({type:"file",onChange:this.handleFileSelection},a,{style:i}))}}]),t}(a.Component);t.default=d},PczM:function(e,t,n){var r=n("0T/a");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},Sfbb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(",")[1]),o=r.length,a=new Uint8Array(o),c=0;c<o;c++)a[c]=r.charCodeAt(c);e(new Blob([a],{type:t||"image/png"}))}})}},TCLN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nuevo-producto",function(){return n("cf6P")}])},V5hS:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},cf6P:function(e,t,n){"use strict";n.r(t);var r=n("eVuF"),o=n.n(r),a=n("ln6h"),c=n.n(a),i=n("Cg2A"),u=n.n(i),l=n("q1tI"),s=n.n(l),p=n("t30L"),d=n("qKvR");function f(e){var t={};return e.nombre||(t.nombre="El Nombre es obligatorio"),e.empresa||(t.empresa="El nombre de la empresa es obligatorio"),e.url?/^(ftp|http|https):\/\/[^ "]+$/.test(e.url)||(t.url="URL no v\xe1lida"):t.url="La URL del producto es obligatoria",e.descripcion||(t.descripcion="La descripcion es obligatoria"),t}var m=n("sPpI"),b=n("iVNf"),h=n("xWvD"),g=n("nOHt"),v=n("KQpA"),y=n.n(v),O=n("Bl1U");n.d(t,"default",(function(){return x}));s.a.createElement;var j={nombre:"",empresa:"",url:"",descripcion:""},w={name:"1ap128e",styles:"text-align:center;margin-top:5rem;"};function x(){var e=Object(l.useState)(!1),t=e[0],n=(e[1],Object(l.useState)("")),r=(n[0],n[1]),a=Object(l.useState)(!1),i=(a[0],a[1]),v=Object(l.useState)(0),x=(v[0],v[1]),S=Object(l.useState)(""),P=S[0],U=S[1],_=Object(b.a)(j,f,(function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(q){t.next=2;break}return t.abrupt("return",F.push("/login"));case 2:return e={nombre:N,empresa:M,url:L,urlimg:P,descripcion:z,votos:0,comentarios:[],creado:u()(),creador:{id:q.uid,nombre:q.displayName},haVotado:[]},D.db.collection("productos").add(e),t.abrupt("return",F.push("/"));case 5:case"end":return t.stop()}}),null,null,null,o.a)})),C=_.valores,E=_.errores,R=(_.submitform,_.handleChange),T=_.handleSubmit,k=_.handleBlur,N=C.nombre,M=C.empresa,L=(C.imagen,C.url),z=C.descripcion,F=Object(g.useRouter)(),B=Object(l.useContext)(h.a),q=B.usuario,D=B.firebase;return Object(d.c)("div",null,Object(d.c)(p.a,null,q?Object(d.c)(s.a.Fragment,null,Object(d.c)("h1",{css:w},"Nuevo Producto"," "),Object(d.c)(m.c,{onSubmit:T,noValidate:!0},Object(d.c)("fieldset",null,Object(d.c)("legend",null,"Informaci\xf3n General"),Object(d.c)(m.a,null,Object(d.c)("label",{htmlFor:"nombre"},"Nombre"),Object(d.c)("input",{type:"text",id:"nombre",placeholder:"Nombre del Producto",name:"nombre",value:N,onChange:R,onBlur:k})),E.nombre&&Object(d.c)(m.b,null,E.nombre),Object(d.c)(m.a,null,Object(d.c)("label",{htmlFor:"empresa"},"Empresa"),Object(d.c)("input",{type:"text",id:"empresa",placeholder:"Nombre de la empresa",name:"empresa",value:M,onChange:R,onBlur:k})),E.empresa&&Object(d.c)(m.b,null,E.empresa),Object(d.c)(m.a,null,Object(d.c)("label",{htmlFor:"imagen"},"Imagen"),Object(d.c)(y.a,{accept:"image/*",id:"imagen",name:"imagen",randomizeFilename:!0,storageRef:D.storage.ref("productos"),onUploadStart:function(){x(0),i(!0)},onUploadError:function(e){i(e),console.error(e)},onUploadSuccess:function(e){x(100),i(!1),r(e),D.storage.ref("productos").child(e).getDownloadURL().then((function(e){U(e)}))},onProgress:function(e){return x({progreso:e})}})),Object(d.c)(m.a,null,Object(d.c)("label",{htmlFor:"url"},"URL"),Object(d.c)("input",{type:"url",id:"url",placeholder:"URL de tu producto",name:"url",value:L,onChange:R,onBlur:k})),E.url&&Object(d.c)(m.b,null,E.url)),Object(d.c)("fieldset",null,Object(d.c)("legend",null,"Sobre tu Producto"),Object(d.c)(m.a,null,Object(d.c)("label",{htmlFor:"descripcion"},"Descripci\xf3n"),Object(d.c)("textarea",{id:"descripcion",name:"descripcion",value:z,onChange:R,onBlur:k})),E.descripcion&&Object(d.c)(m.b,null,E.descripcion)),t&&Object(d.c)(m.b,null,t),Object(d.c)(m.d,{type:"submit",value:"Crear Producto"}))):Object(d.c)(O.a,null)))}},guND:function(e,t,n){n("PczM"),e.exports=n("p9MR").Date.now},"hu/m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){HTMLCanvasElement.prototype.toBlob||(0,a.default)();return new Promise((function(r,o){var a=new FileReader;a.onload=function(a){var c=new Image;c.onload=function(a){var i=document.createElement("canvas"),u=t||c.width,l=n||c.height;i.width=u,i.height=l;var s=u/c.width,p=l/c.height,d=Math.max(s,p),f=d*c.width,m=d*c.height,b=Math.min((l-m)/2,0),h=Math.min((u-f)/2,0),g=i.getContext("2d");if(!g)return o("Could not get the context of the canvas element");g.drawImage(c,h,b,f,m),i.toBlob((function(e){r(e)}),e.type)},c.src=a.target.result},a.readAsDataURL(e)}))};var r,o=n("Sfbb"),a=(r=o)&&r.__esModule?r:{default:r}},iVNf:function(e,t,n){"use strict";var r=n("hfKm"),o=n.n(r),a=n("2Eek"),c=n.n(a),i=n("XoMD"),u=n.n(i),l=n("Jo+v"),s=n.n(l),p=n("4mXO"),d=n.n(p),f=n("vYYK"),m=n("pLtp"),b=n.n(m),h=n("q1tI");function g(e,t){var n=b()(e);if(d.a){var r=d()(e);t&&(r=r.filter((function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=function(e,t,n){var r=Object(h.useState)(e),a=r[0],i=r[1],l=Object(h.useState)({}),p=l[0],d=l[1],m=Object(h.useState)(!1),v=m[0],y=m[1];Object(h.useEffect)((function(){v&&(0===b()(p).length&&n(),y(!1))}),[p]);return{valores:a,errores:p,submitform:v,handleChange:function(e){i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(f.a)(e,t,n[t])})):u.a?c()(e,u()(n)):g(Object(n)).forEach((function(t){o()(e,t,s()(n,t))}))}return e}({},a,Object(f.a)({},e.target.name,e.target.value)))},handleSubmit:function(e){e.preventDefault();var n=t(a);d(n),y(!0)},handleBlur:function(){var e=t(a);d(e)}}}},rnWd:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},sPpI:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n("wTIg");var o=Object(r.a)("form",{target:"el2bdql0"})({name:"n77sy1",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem;}"}),a=Object(r.a)("div",{target:"el2bdql1"})({name:"118f3y4",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:400px;}"}),c=Object(r.a)("input",{target:"el2bdql2"})({name:"q8jhpz",styles:'background-color:var(--naranja);width:100%;padding:1.5rem;text-align:center;color:#fff;font-size:1.8rem;text-transform:uppercase;border:none;font-family:"PT Sans",sans-serif;font-weight:700;&:hover{cursor:pointer;}'}),i=Object(r.a)("p",{target:"el2bdql3"})({name:"w0dpqk",styles:'background-color:red;padding:1rem;font-family:"PT Sans",sans-serif;font-weight:700;font-size:1.4rem;color:#fff;text-align:center;text-transform:uppercase;margin:2rem 0;'})},zpNE:function(e,t,n){var r=n("V5hS"),o=n("rnWd");e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||r)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var i=0;i<16;++i)t[a+i]=c[i];return t||o(c)}}},[["TCLN",0,1]]]);